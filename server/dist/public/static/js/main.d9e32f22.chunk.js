(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,r){e.exports=r(47)},31:function(e,t,r){},46:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(18),s=r.n(o),c=(r(31),r(6)),i=r.n(c),l=r(9),u=r(19),m=r(20),d=r(23),v=r(21),p=r(24),h=r(12),f=r.n(h),E=r(11),g=r.n(E),b=r(10),w=r.n(b),k=function(e){return n.a.createElement("form",null,n.a.createElement(g.a.Row,{className:"justify-content-md-center"},n.a.createElement(w.a,{md:"auto"},n.a.createElement(g.a.Group,null,n.a.createElement(g.a.Label,null,"Movies"),n.a.createElement(g.a.Control,{as:"select",onChange:e.newMovieSelected},Object.keys(e.movies).map(function(e,t){return n.a.createElement("option",{key:t,value:e},e)}))))))},y=r(22),x=r.n(y),M=function(e){var t=Object.keys(e.movieDetails),r=e.movieDetails;return n.a.createElement("div",null,n.a.createElement(x.a,{striped:!0,bordered:!0,hover:!0,variant:"dark"},n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:2},n.a.createElement("b",null,"Price"))),t.map(function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.toUpperCase()),n.a.createElement("td",null,"$",r[e].Price))}))))},C=r(14),j=r.n(C),S=function(e){return n.a.createElement(w.a,null,n.a.createElement(j.a,{className:"justify-content-md-center"},n.a.createElement("p",{style:{color:"red"}},e.errorMessage)),n.a.createElement(j.a,{className:"justify-content-md-center"},1==e.errorCode||2==e.errorCode?n.a.createElement("button",{style:{color:"purple"},onClick:e.tryAgain,className:"close","aria-label":"Close"},"Try Again"):null,n.a.createElement("button",{onClick:e.clearError,className:"close","aria-label":"Close"},n.a.createElement("span",{"aria-hidden":"true",style:{color:"red",margin:"0 0 0 3em "}},"\xd7"))))},O=(r(46),function(e){function t(e){var r;return Object(u.a)(this,t),(r=Object(d.a)(this,Object(v.a)(t).call(this,e))).state=void 0,r.getMovies=Object(l.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t={},a=0;case 2:if(!(a<3)){e.next=14;break}return e.next=5,fetch("/api/movies");case 5:return t=e.sent,e.next=8,t.json();case 8:if(3===(t=e.sent).code){e.next=11;break}return e.abrupt("break",14);case 11:a++,e.next=2;break;case 14:if(3!==t.code){e.next=18;break}r.setState({errorCode:1,showErrors:!0,errorMessage:"Could not retrive Movies",loadingMovies:!1}),e.next=21;break;case 18:return e.next=20,r.setState({showErrors:!1,errorCode:0,loadingMovies:!1,movies:t.movies,movieSelected:Object.keys(t.movies)[0]});case 20:r.getMovieDetails();case 21:case"end":return e.stop()}},e)})),r.newMovieSelected=function(){var e=Object(l.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.target.value),e.next=3,r.setState({movieSelected:t.target.value});case 3:r.getMovieDetails();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.clearError=function(e){r.setState({showErrors:!1})},r.tryAgain=function(){var e=Object(l.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=(a=r.state.errorCode)){e.next=6;break}return e.next=4,r.getMovies();case 4:e.next=9;break;case 6:if(2!=a){e.next=9;break}return e.next=9,r.getMovieDetails();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),r.state={movies:{},movieDetails:{},movieSelected:"",showErrors:!1,errorMessage:"",errorCode:0,loadingMovies:!0,loadingPrice:!0},r}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMovies();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMovieDetails",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setState({loadingPrice:!0});case 2:r=0;case 3:if(!(r<3)){e.next=15;break}return e.next=6,fetch("/api/movie",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.movies[this.state.movieSelected])});case 6:return t=e.sent,e.next=9,t.json();case 9:if(3===(t=e.sent).code){e.next=12;break}return e.abrupt("break",15);case 12:r++,e.next=3;break;case 15:3===t.code?3===t.code&&this.setState({errorCode:2,showErrors:!0,errorMessage:"Could not retrive price"}):this.setState({showErrors:!1,loadingPrice:!1,movieDetails:t.cinemas});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(f.a,null,this.state.showErrors?n.a.createElement(S,{errorMessage:this.state.errorMessage,errorCode:this.state.errorCode,clearError:this.clearError,tryAgain:this.tryAgain}):this.state.loadingMovies?n.a.createElement("p",null,"Loading"):n.a.createElement(n.a.Fragment,null,n.a.createElement(f.a,null,n.a.createElement("h1",{style:{margin:"50px"}},"Compare Movie Price")),n.a.createElement(f.a,null,n.a.createElement(k,{newMovieSelected:this.newMovieSelected,movies:this.state.movies})),n.a.createElement(f.a,null,this.state.loadingPrice?n.a.createElement("p",null,"Getting Price"):n.a.createElement(M,{movieDetails:this.state.movieDetails}))))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.d9e32f22.chunk.js.map